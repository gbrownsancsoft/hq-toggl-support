<label class="block"
  >Search
  <input [formControl]="staffDashboardService.search" class="text-black" />
</label>
<label class="block"
  >Period
  <select [formControl]="staffDashboardService.period" class="text-black">
    <option [ngValue]="Period.Today">Day</option>
    <option [ngValue]="Period.Week">Week</option>
  </select>
</label>
<label class="block"
  >Date
  <input
    [formControl]="staffDashboardService.date"
    type="date"
    class="text-black"
  />
</label>

@if (staffDashboardService.time$ | async; as dashboard) {
  <label class="block"
    >Date
    <input
      [value]="dashboard.endDate"
      type="date"
      class="text-black"
      readonly
    />
  </label>
  <button
    type="button"
    (click)="staffDashboardService.date.setValue(dashboard.previousDate)"
  >
    Previous
  </button>
  <button
    type="button"
    (click)="staffDashboardService.date.setValue(dashboard.nextDate)"
  >
    Next
  </button>
  <div>Total Hours: {{ dashboard.totalHours }}</div>
  <div>Billable Hours: {{ dashboard.billableHours }}</div>
  @for (date of dashboard.dates; track date.date) {
    <div
      class="px-5 pb-1 pt-4 font-open-sans text-nav-disabled text-xs font-bold uppercase"
    >
      {{ date.date | date: "EEEE" }} | {{ date.date }}
    </div>
    <table class="min-w-full border-spacing-0 border-separate">
      <thead>
        <tr class="text-left">
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="90"
          >
            Hrs
          </th>
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="120"
          >
            Date
          </th>
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="120"
          >
            Chrg Code
          </th>
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="180"
          >
            Client
          </th>
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="180"
          >
            Project
          </th>
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="140"
          >
            Activity / Task
          </th>
          <th class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5">
            Description
          </th>
          <th
            class="bg-blue-900 border-steel-blue-600 border-y py-3 pl-5"
            width="20"
          ></th>
        </tr>
      </thead>
      <tbody>
        <tr
          hq-staff-dashboard-time-entry
          (hqTimeChange)="upsertTime($event)"
          [time]="{ date: date.date }"
        ></tr>
        @for (time of date.times; track time.id) {
          <tr
            hq-staff-dashboard-time-entry
            (hqTimeChange)="upsertTime($event)"
            (hqTimeDelete)="deleteTime($event)"
            [time]="time"
          ></tr>
        }
      </tbody>
    </table>
  }
}
